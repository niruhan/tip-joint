img = imread("img/lena_gray.png");
% imshow(img);
noisy_img = imnoise(img,"gaussian");
% imshow(noisy_img);

[h, w] = size(img);
img_matrix = im2double(img);
filter_output = zeros(h, w);

hw = 3;
a = hw;
b = hw;

[Y,X] = meshgrid(-a:a, -b:b);
sigma = 2;
g = exp(-(X.^2 + Y.^2)/sigma^2);
surf(g)

for m=a+1:h-a
    for n=b+1:w-b
        filter_output(m,n) = sum(sum(f(m-a:m+a, n-b:n+b).*g));
    end
end

figure,
b = mat2gray(o);
imshow(b);